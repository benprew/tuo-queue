#!/usr/bin/env ruby

require 'bundler'
require 'daemons'
require_relative '../lib/job'

# Daemons.daemonize

warn 'starting up'

loop do
  job = Job.queued.first
  sleep 15 && next unless job

  warn "processing job #{job}"

  job.process
end
